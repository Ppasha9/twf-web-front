{"version":3,"sources":["../src/dialog.js"],"names":[],"mappings":"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","file":"dialog.js","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n// Open search dialogs on top of an editor. Relies on dialog.css.\n\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\")\n    // CommonJS\n    mod(require(\"codemirror\"));\n  else if (typeof define == \"function\" && define.amd)\n    // AMD\n    define([\"codemirror\"], mod);\n  // Plain browser env\n  else mod(CodeMirror);\n})((CodeMirror) => {\n  let createPanel = (cm, template, bottom) => {\n    let el = document.createElement(\"div\");\n    el.className = \"CodeMirror-find-and-replace-dialog\";\n\n    if (typeof template == \"string\") {\n      el.innerHTML = template;\n    } else {\n      // Assuming it's a detached DOM element.\n      el.appendChild(template);\n    }\n    let panel = cm.addPanel(el, {\n      position: bottom ? \"bottom\" : \"top\",\n    });\n    return panel;\n  };\n\n  let closePanel = (cm) => {\n    let state = cm.state.findAndReplaceDialog;\n    if (!state || !state.current) {\n      return;\n    }\n\n    state.current.panel.clear();\n\n    if (state.current.onClose) state.current.onClose(state.current.panel.node);\n    delete state.current;\n    cm.focus();\n  };\n\n  CodeMirror.defineExtension(\"openFindAndReplaceDialog\", function (\n    template,\n    options\n  ) {\n    if (!this.addPanel) {\n      throw `CodeMirror-FindAndReplaceDialog requires the panel addon to be included in the page.  This can usually be found in the addons folder of the default CodeMirror installation, and must be included BEFORE the FindAndReplaceDialog addon.`;\n    }\n    if (!options) options = {};\n    if (!this.state.findAndReplaceDialog) this.state.findAndReplaceDialog = {};\n\n    if (this.state.findAndReplaceDialog.current) {\n      closePanel(this);\n    }\n\n    let panel = createPanel(this, template, options.bottom);\n    this.state.findAndReplaceDialog.current = {\n      panel: panel,\n      onClose: options.onClose,\n    };\n\n    let inputs = panel.node.getElementsByTagName(\"input\");\n    let buttons = panel.node.getElementsByTagName(\"button\");\n    if (inputs && inputs.length > 0 && options.inputBehaviour) {\n      for (let i = 0; i < options.inputBehaviour.length; i++) {\n        let behaviour = options.inputBehaviour[i];\n        let input = inputs[i];\n        if (behaviour.value) {\n          input.value = behaviour.value;\n        }\n\n        if (!!behaviour.focus) {\n          input.focus();\n        }\n\n        if (!!behaviour.selectValueOnOpen) {\n          input.select();\n        }\n\n        if (behaviour.onInput) {\n          CodeMirror.on(input, \"input\", (e) => {\n            behaviour.onInput(inputs, e);\n          });\n        }\n\n        if (behaviour.onKeyUp) {\n          CodeMirror.on(input, \"keyup\", (e) => {\n            behaviour.onKeyUp(inputs, e);\n          });\n        }\n\n        CodeMirror.on(input, \"keydown\", (e) => {\n          if (behaviour.onKeyDown && behaviour.onKeyDown(inputs, e)) {\n            return;\n          }\n\n          if (\n            e.keyCode === 27 ||\n            (!!behaviour.closeOnEnter && e.keyCode === 13)\n          ) {\n            input.blur();\n            CodeMirror.e_stop(e);\n            closePanel(this);\n          } else if (e.keyCode === 13 && behaviour.callback) {\n            CodeMirror.e_preventDefault(e);\n            behaviour.callback(inputs, e);\n          }\n        });\n\n        if (behaviour.closeOnBlur !== false)\n          CodeMirror.on(input, \"blur\", () => {\n            closePanel(this);\n          });\n      }\n    }\n\n    if (buttons && buttons.length > 0 && options.buttonBehaviour) {\n      for (let i = 0; i < options.buttonBehaviour.length; i++) {\n        let behaviour = options.buttonBehaviour[i];\n        if (!!behaviour.callback) {\n          CodeMirror.on(buttons[i], \"click\", (e) => {\n            CodeMirror.e_preventDefault(e);\n            behaviour.callback(inputs, e);\n          });\n        } else {\n          CodeMirror.on(buttons[i], \"click\", (e) => {\n            CodeMirror.e_preventDefault(e);\n            closePanel(this);\n          });\n        }\n      }\n    }\n    return () => {\n      closePanel(this);\n    };\n  });\n});\n"]}